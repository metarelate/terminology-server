<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Terminology Manager mapping constructs</title>
  </head>
  <body>
    <h1>Terminology Manager Mapping constructs</h1>
    <p>A set of code tables expressed in RDF can be enriched with extra
      (meta) statements that specify structure and properties of the
      terminology: which URIs are to be considered codes, which are the
      relative registers, which versioning policy to adopt and so on.<br>
      The following terms (expressed via URIs) provide a mini-language
      to specify the structure of code tables in RDF: this language is
      understood by the Terminology Manager and used to construct the
      Terminology Model (statements using this meta-language are then
      discarded once "processed" as they are not part of the codes
      information content).<br>
    </p>
    <h2>TerminologyIndividual</h2>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologyIndividual&gt;<br></pre>
    A code that is stated to be of type "Terminology Individual" is
    considered as a code. The terminology Manager builds a
    "CodeIndividual" object with the URI of the code, and adds to its
    current version (the default version, or a version specified for
    this construction) all statements that have as subject the code
    URIs, and that are not part of the "meta language" here defined.
    Note that the Terminology Manager supports more generic set of
    statements in relation to a code, but the Terminology Manager
    constructor from RDF is currently limited to statements that have
    the code as a subject.<br>
    <br>
    <h3>Examples:</h3>
    <pre><font color="#cc0000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/11/001&gt;</b></font><b><br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt; "i0" ;</b><br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#BUFR_DataWidth_Bits&gt; "9"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;<br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#BUFR_ReferenceValue&gt; "0"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;<br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#BUFR_Scale&gt; "0"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;<br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#BUFR_Unit&gt; "deg" ;<br>	&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#status&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#Operational&gt; ;<b><br>	&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/11&gt; ;<br>	&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "001" ;<br>	<font color="#cc0000">a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologyIndividual&gt;</font>, </b><font color="#33cc00">&lt;http://www.w3.org/2004/02/skos/core#Concept&gt;</font><b> ;</b><br>	&lt;http://www.w3.org/2000/01/rdf-schema#comment&gt; "A code for Wind direction (degree true), with the specific encoding as in use in bufr." ;<br>	&lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Wind direction (degree true)" ;<br>	&lt;http://www.w3.org/2004/02/skos/core#exactMatch&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/crex/b/11/001&gt; ;<br>	&lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X11Y001" .<br></pre>
    Statements in bold are processed by the Terminology Manager Meta
    Language. The remaining statements are relative to the code and
    published by the platform. The statement that asserts the
    "TerminologyIndividual" type is in red (this makes use of the
    syntactic form "a" for "rdf:type").<br>
    Note has the code can have more than one type, in this case
    skos:Concept (in green) that is an information proper of the code
    and published by the platform.<br>
    <br>
    <h2>TerminologySet</h2>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt;</pre>
    <pre></pre>
    A URI that is stated to be of type "Terminology Set" is considered
    as a register (or "Table"). All statements that have such URI as a
    subject are considered to be pertinent to the register.<br>
    <h3>Examples:</h3>
    <pre><font color="#cc0000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/01&gt;</b><br>&nbsp;&nbsp;&nbsp; <b><font color="#330033">&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt; "i0" ;</font></b></font><b><br>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b&gt; ;<br>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "01" ;</b><br><b><font color="#cc0000">&nbsp;&nbsp;&nbsp; a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;</font></b><br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#description&gt; "This is a registry of properties ... ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Identification" ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X01" .</pre>
    <br>
    <h2>containedIn</h2>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt;<br><br>Express the containment between a code and a Register (or Table), as well as the containment of (sub) register in registers.<br><br></pre>
    <h3>Examples:</h3>
    <p>Code contained in a register:<br>
    </p>
    <pre><font color="#cc0000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/01&gt;</b><br>&nbsp;&nbsp;&nbsp; <b><font color="#330033">&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt; "i0" ;</font></b></font><b><br>&nbsp;&nbsp;&nbsp;<font color="#990000"> &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b&gt; ;</font><br>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "01" ;</b><br><font color="#000000"><b>&nbsp;&nbsp;&nbsp; a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;</b></font><br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#description&gt; "This is a registry of properties ... ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Identification" ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X01" .
<br>(Sub) register contained in another register:<br><br><font color="#cc0000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/01&gt;</b><br><font color="#000000">&nbsp;&nbsp;&nbsp; <b>&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt;</b> "i0" ;</font></font><br><b><font color="#990000">&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b&gt; ;</font></b><br><b>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "01" ;</b><br><b>&nbsp;&nbsp;&nbsp; a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;</b><br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#description&gt; "This is a registry of properties ... ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Identification" ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X01" .<br><br>A nonsensical statement, like: register containedIn code, will not be considered by the system. It will usually not give rise to an error, and it may appear in the published output, or it may just be ignored.<br><br></pre>
    <h2>nameSpace</h2>
    <pre></pre>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt;<br><br></pre>
    Specifies which lexical token is to be associated to this element in
    the contraction of a URL.<br>
    For instance, if the Terminology Structure has two register and one
    code, with the following namespaces:<br>
    <pre>http://test/RegA nameSpace "A"<br>http://test/RegB nameSpace "B"<br>http://test/CodA "A"</pre>
    and the following containment relations are specified:<br>
    <pre>http://test/CodA containedIn http://test/RegB<br>http://test/RegB containedIn http://test/RegA</pre>
    <br>
    the system will construct URL for these entities as follow:<br>
    <pre>http://test/RegA will have url: baseURL/A<br>http://test/RegB will have url: baseURI/A/B<br>http://test/CodA will have url: baseURI/A/B/A</pre>
    where baseURI is provided in the configuration file (see <a
      href="Guide_To_Configuration_Files.html">guide to configuration
      files</a>).<br>
    <b>Note that the URI of a code is not necessarily its URL. When this
      is sought (often in Linked Data), this alignment must be
      constructed in the mapping.</b><br>
    <h3>Examples:</h3>
    <pre><font color="#cc0000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/01&gt;</b><br><font color="#000000">&nbsp;&nbsp;&nbsp; <b>&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt;</b> "i0" ;</font></font><br><font color="#000000"><b>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b&gt; ;</b></font><br><font color="#990000"><b>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "01" ;</b></font><br><b>&nbsp;&nbsp;&nbsp; a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;</b><br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#description&gt; "This is a registry of properties ... ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Identification" ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X01" .<br><br></pre>
    If no namespace is provided, sometimes a useful default is derived
    from the URI (e.g.: last substring after "/").<br>
    <br>
    <h2>hasVersion</h2>
    <pre>http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion<br><br></pre>
    The use of hasVersion is optional. If used, the corresponding entity
    (set or individual) is "versioned": updates result in a new version.<br>
    The object of this property is a string representing the version
    number, that follows the convention String+Numeric (e.g.: v1).<br>
    If no hasVersion statement is provided, the corresponding entity is
    created with a default version (currently hardcoded in a Config
    static file) that is only visible internally.<br>
    Note than, within the software, versioning could be siwtched on and
    off for specific entities (this functionality is not provided via
    command line).<br>
    <h3>Examples:</h3>
    <pre><font color="#cc0000">&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b/01&gt;<br>&nbsp;&nbsp;&nbsp; <b>&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt;</b> "i0" ;</font><br>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufr/b&gt; ;<br>&nbsp;&nbsp;&nbsp; &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "01" ;<br>&nbsp;&nbsp;&nbsp; a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#description&gt; "This is a registry of properties ... ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "Identification" ;<br>&nbsp;&nbsp;&nbsp; &lt;http://www.w3.org/2004/02/skos/core#notation&gt; "F0X01" .<br><br><br></pre>
    <h2>Pragma</h2>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#pragma&gt;<br><br>Pragma is a property that instructs the Terminology Builder to apply a "pragmatic transformation", specified in the object of the property, to element specified in its subject..<br>For an explanation of how pragma operations are processed in the context of the Terminology Manager refer to the <a href="Terminology_Manager_Platform_Design.html">Terminology Manager Platform Design</a>.<br><br></pre>
    <h3>Examples:</h3>
    <pre><pre><font color="#990000"><b>&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufrcrex/codes+flags&gt;</b></font><br>	<b>&lt;http://reference.metoffice.gov.uk/data/wmo/def/met#hasVersion&gt; "i0" ;</b><br>	<b>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#containedIn&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/tdfc/bufrcrex&gt; ;</b><br>	<b>&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#nameSpace&gt; "codes+flags" ;</b><br>	<b><font color="#990000">&lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#pragma&gt; &lt;http://reference.metoffice.gov.uk/data/wmo/mapping/generic1#canonicalExpandDashSuppressFlagsLimit&gt;</font> ;<br>	a &lt;http://reference.metoffice.gov.uk/data/wmo/meta/mapping#TerminologySet&gt; ;</b><br>	&lt;http://www.w3.org/2000/01/rdf-schema#comment&gt; "Codes used in combination with BUFR or CREX table B to identify object of properties. Flags are compressed sets of statements."@en ;<br>	&lt;http://www.w3.org/2000/01/rdf-schema#label&gt; "BUFR and CREX Codes and Flags Table"@en .</pre></pre>
    In the above, the pragmatic transformation specified in&nbsp; <font
      color="#000000">&lt;http://reference.metoffice.gov.uk/data/wmo/mapping/generic1#canonicalExpandDashSuppressFlagsLimit&gt;
      is applied to the register: </font><font color="#000000">&lt;http://reference.metoffice.gov.uk/data/wmo/tdcf/bufrcrex/codes+flags&gt;.</font><br>
    Note how the URI of the pragma can be an arbitrary URI specified in
    any mapping file provided to the system. It is the type associated
    to the pragma URI that determines what this pragmatic operation will
    perform (an action that is tunable via parameters).<br>
    The illustration of the pragmatic operations presented will help to
    clarify their usage (note that the following examples are provided
    in turtle syntax):<br>
    <pre>map:canonicalExpandDashSuppressFlagsLimit a <font color="#006600"><b>metaMap:expandDashAndSuppress</b></font>;<br>	<font color="#990000">metaMap:pragmaProp&nbsp;&nbsp;&nbsp; &nbsp; metaMap:pragmaSuppressSource;</font><br>	<font color="#000099">metaMap:overrideProp</font>&nbsp;&nbsp;&nbsp; wmo:CodeFigure;<br>	<font color="#000099">metaMap:overrideProp</font>&nbsp;&nbsp;&nbsp; skos:notation;<br>	.</pre>
    The above specification, referred via <font color="#000000">&lt;http://reference.metoffice.gov.uk/data/wmo/mapping/generic1#canonicalExpandDashSuppressFlagsLimit&gt;,
      can be provided in any input file to the Terminology Manager.<br>
      The type of the pragma in this example is: </font><font
      color="#006600"><b>metaMap:expandDashAndSuppress</b></font>. This
    operations expands all URIs which end in x-y. For instance, if the
    table specifies the code:<br>
    <pre>http://test/1-3</pre>
    the application of the above URI results in three different codes:<br>
    <pre>http://test/1<br>http://test/2<br>http://test/3</pre>
    A few modifiers allow to tune the behaviour of this specific
    instance of "expandDashAndSuppress".<br>
    <pre><b><font color="#cc0000">metaMap:pragmaProp metaMap:prgamaSuppressSource</font></b></pre>
    instructs the system to eliminate the original code:<br>
    <pre>http://test/1-3</pre>
    is deleted if the above property is set, kept otherwise.<br>
    <br>
    <pre><font color="#000000"><b><font color="#000099">metaMap:overrideProp </font></b><br></font></pre>
    <pre><font color="#000000">instructs the system to change its object, according to the expansion (note: this happens for literals!)</font><font color="#000000">. For instance the code:</font><br></pre>
    <pre>http://test/1-3<br>	wmo:CodeFigure 	"1-3";<br>	skos:notation 	"1-3";<br>	.</pre>
    <br>
    gets expanded in:<br>
    <br>
    <pre>http://test1<br>	wmo:CodeFigure 	"1";<br>	skos:notation 	"1";<br>	.<br>http://test2<br>	wmo:CodeFigure 	"2";<br>	skos:notation 	"2";<br>	.
</pre>
    <pre>http://test3<br>	wmo:CodeFigure 	"3";<br>	skos:notation 	"3";<br>	.
</pre>
    Instead of:<br>
    <br>
    <pre>http://test1<br>	wmo:CodeFigure 	"1-3";<br>	skos:notation 	"1-3";<br>	.</pre>
    <pre><br>http://test2<br>	wmo:CodeFigure 	"1-3";<br>	skos:notation 	"1-3";<br>	.
</pre>
    <pre>http://test3<br>	wmo:CodeFigure 	"1-3";<br>	skos:notation 	"1-3";<br>	.
</pre>
    <br>
    <font color="#000000">Other parameters are:<br>
    </font><font color="#000000"><br>
    </font>
    <pre><font color="#000000"><b><font color="#993399">metaMap:pragmaPad	"5"; </font></b><br></font></pre>
    Specifies the padding for the expanded codes (both in URIs and in
    overridden properties) resulting, for the above example, in:<br>
    <pre>http://test00001<br>	wmo:CodeFigure 	"00001";<br>	skos:notation 	"00001";<br>	.</pre>
    [Note that pragmaPad may be obsoleted by a more recent auto-padding
    approach, that defines the padding based on the longest string in
    the range, considering a padded code.]<br>
    <pre><b><font color="#993399">metaMap:hardLimit	"20";<br></font></b></pre>
    <font color="#000000">Specifies a limit for the code expansion.</font><br>
    <pre><b><font color="#993399">metaMap:pragmaProp	metaMap:HardLimitCut;</font></b></pre>
    Specifies what to do if the range exceeds the specified limit:<br>
    If the uri is:<br>
    http://test/1-100 and the hardLimit is set to 20, if <font
      color="#993399">HardLimitCut</font> is asserted then no mapping at
    all is produced for this code, otherwise mapping is produced only
    for the first 20 codes.&nbsp; [<b>NDR: To verify: may be the
      inverse!</b>]<br>
    <br>
    <br>
    <h1>Additional reserved terminologies<br>
    </h1>
    Some properties which are proper of codes have a specific meaning
    also for the Terminology Manager. This is for instance the case for
    the property:<br>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#status&gt;</pre>
    and its values:<br>
    <pre>&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#Operational&gt;<br>&lt;http://reference.metoffice.gov.uk/data/wmo/def/wmo#Validation&gt;</pre>
    The Terminology Model understands them as possible states of a code,
    and it relies on the code information (the same that is
    web-published) to compute the next state after a given action. Such
    properties are currently hard-coded in the system as fields in
    static config classes.<br>
  </body>
</html>
